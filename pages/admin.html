<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>CAC Movies | Catálogo de películas</title>
        <!--es lo que se ve en la pestaña-->
        <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <!--es el link externo a detalles en css-->
        <link rel="stylesheet" href="../css/estilos.css">
    </head>
</head>
<body>
    <header class="header">
        <nav>
            <!--para que vuelva a la página principal-->
            <a href="../index.html"> 
                <img src="../assets/img/movies_movie_oscar_themedia_1735.png" width="50">
                <span>CAC-Movies</span> <!--escribe en el navegador-->
            </a>
            <ul>
                <li><a class="linkNav" href="../index.html#tendencias">Tendencias</a></li>
                <li><a href="registrarse.html">Registrarse</a></li>
                <li><a href="iniciodesesion.html">Iniciar Sesión</a></li>
            </ul>
        </nav>
    </header> 

    <main>
        <section>
        <h1 class="text-center pt-5 mb-5 fs-1">Gestión de películas</h1>
        <div class="container-md text-center" id="datos_peliculas">
            <div class="row justify-content-center">
                <div class="col-6">
                    <label class="form-label">Título</label>
                    <input id="titulo" type="text" class="form-control mb-3">
                </div>
                <div class="col-2">
                    <label class="form-label">Lanzada</label>
                    <input class="form-control" id="fechaDeEstreno">
                </div>
                <div class="col-2">
                    <label class="form-label">Género</label>
                    <input class="form-control" id="genero">
                </div>
                <div class="col-2">
                    <label class="form-label">Dura</label>
                    <input class="form-control" id="duracion">
                </div>
                <div class="col-3">
                    <label class="form-label">Dirige</label>
                    <input class="form-control" id="director">
                </div>
                <div class="col-9">
                    <label class="form-label">Reparto</label>
                    <input class="form-control mb-3" id="elenco">
                </div>
                <div class="col-12 img-fluid">
                    <label class="form-label">Sinopsis</label>
                    <input class="form-control mb-3" id="sinopsis">
                </div>
                <div class="col-1">
                    <label class="form-label">Clasificada</label>
                    <input class="form-control mb-3" id="clasicacion">
                </div>
                <div class="col-7">
                    <label class="form-label">Imagen</label>
                    <input class="form-control" type="file" id="imagen" name="imagen" accept="image/*">
                </div>
                <div class="col-4">
                    <!--<label class="form-label">Agregar película</label>
                    <button type="submit" class="btn btn-primary mb-3 row-cols-auto">Agregar</button>-->
                    <input class="btn btn-success btn-primary boton" type="submit" value="Agregar Pelicula">
                </div>
        </div>
        
    </section>
        <hr>
        <section class="overflow-x-auto">
            <h1 class="text-center pt-5 mb-5 fs-1">Listado de películas</h1>
           <div class="row justify-content-center">
            <table class=" table tabla">
                <thead class="color_encabezado">
                  <tr class="text-center">
                    <th class="col-id" scope="col">ID</th>
                    <th class="col-title" scope="col">Título</th>
                    <th class="col-director" scope="col">Director</th>
                    <th class="col-cast" scope="col">Elenco</th>
                    <th class="col-synopsis" scope="col">Sinopsis</th>
                    <th class="col-duration" scope="col">Duración</th>
                    <th class="col-genre" scope="col">Género</th>
                    <th class="col-images" scope="col">Imagenes</th>
                    <th class="col-actions" scope="col">Acciones</th>
                  </tr>
                </thead>
                <tbody id="tabla-cuerpo">
                    <!-- Aquí se insertarán las filas de películas -->
                </tbody>
                
              </table>
           </div> 
        </section>
    </main>
    <script src="../js/bootstrap.bundle.min.js"></script>
                <script src="../js/script.js"></script>
        <script>
            document.getElementById('datos_peliculas').addEventListener('submit', async function(event) {
    event.preventDefault();
    
    const form = event.target;
    const formData = new FormData();
    
    formData.append('titulo', form.title.value);
    formData.append('director', form.duration.value);
    formData.append('elenco', form.director.value);
    formData.append('duracion', form.cast.value);
    formData.append('sinopsis', form.releaseDate.value);
    formData.append('fechaDeEstreno', form.plot.value);
    formData.append('imagen', form.poster.files[0]);

    try {
        const response = await fetch('http://localhost:8080/apisimple/peliculas', {
            method: 'POST',
            body: formData
        });

        if (response.ok) {
            const result = await response.json();
            console.log('Película enviada con éxito:', result);
        } else {
            console.error('Error al enviar la película:', response.statusText);
        }
    } catch (error) {
        console.error('Error al enviar la película:', error);
    }
});

        </script>
</body>
<footer>
    <nav class="d-flex justify-content-evenly width: 30px" >
        <a class="btn btn-primary" href="#" role="button">Términos y condiciones</a>
            <button class="btn btn-primary" type="submit">Preguntas frecuentes</button>
            <button class="btn btn-primary" type="button">Ayuda</button>
            <li>
                <a href="administrador.html">Administrador</a></li>
      
          
        <a href="../index.html" text-end>
        <img src="../assets/img/flecha-hacia-arriba.png" alt="ir arriba flecha">
        </a>
    </nav>
</footer>

</html>
